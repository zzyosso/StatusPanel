<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>状态面板</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="cyber-header">
            <h1 class="glitch" data-text="状态面板">状态面板</h1>
            <div class="scan-line"></div>
        </header>

        <nav class="cyber-nav">
            <button class="nav-btn active" data-tab="status">状态栏</button>
            <button class="nav-btn" data-tab="pet">我的宠物</button>
            <button class="nav-btn" data-tab="backpack">背包</button>
            <button class="nav-btn" data-tab="storage">仓库</button>
            <button class="nav-btn" data-tab="shop">商店</button>
            <button class="nav-btn" data-tab="skills">技能树</button>
            <button class="nav-btn" data-tab="map">思维地图</button>
            <button class="nav-btn" data-tab="challenge">考验</button>
            <button class="nav-btn settings-btn" data-tab="settings">⚙️</button>
            <div class="theme-switcher">
                <span class="theme-label">主题:</span>
                <button class="theme-btn active" data-theme="cyber" title="赛博朋克">🌃</button>
                <button class="theme-btn" data-theme="strawberry" title="草莓粉">🍓</button>
                <button class="theme-btn" data-theme="matcha" title="抹茶绿">🍵</button>
                <button class="theme-btn" data-theme="glass" title="透明玻璃">💎</button>
            </div>
        </nav>

        <!-- 状态栏 -->
        <section id="status" class="panel active">
            <div class="panel-header">
                <h2>角色状态</h2>
                <button class="cyber-btn" onclick="addNewStat()">+ 添加属性</button>
            </div>
            <div id="stats-container" class="stats-container">
                <!-- 默认属性 -->
            </div>
        </section>

        <!-- 宠物 -->
        <section id="pet" class="panel">
            <div class="panel-header">
                <h2>我的宠物</h2>
                <div class="pet-food-display">🍖 × <span id="pet-food-amount">0</span></div>
            </div>
            
            <div id="pet-select-screen" class="pet-select-screen">
                <h3>选择你的宠物伙伴</h3>
                <div class="pet-options">
                    <div class="pet-option" onclick="selectPet('cat')">
                        <div class="pet-icon">🐱</div>
                        <div class="pet-option-name">小猫咪</div>
                    </div>
                    <div class="pet-option" onclick="selectPet('dog')">
                        <div class="pet-icon">🐶</div>
                        <div class="pet-option-name">小狗狗</div>
                    </div>
                    <div class="pet-option" onclick="selectPet('rabbit')">
                        <div class="pet-icon">🐰</div>
                        <div class="pet-option-name">小兔子</div>
                    </div>
                    <div class="pet-option" onclick="selectPet('bear')">
                        <div class="pet-icon">🐻</div>
                        <div class="pet-option-name">小熊熊</div>
                    </div>
                    <div class="pet-option" onclick="selectPet('panda')">
                        <div class="pet-icon">🐼</div>
                        <div class="pet-option-name">小熊猫</div>
                    </div>
                    <div class="pet-option" onclick="selectPet('fox')">
                        <div class="pet-icon">🦊</div>
                        <div class="pet-option-name">小狐狸</div>
                    </div>
                </div>
            </div>

            <div id="pet-main-screen" class="pet-main-screen" style="display:none;">
                <div class="pet-info-bar">
                    <div class="pet-stat">
                        <span class="pet-stat-label">等级</span>
                        <span class="pet-stat-value" id="pet-level">1</span>
                    </div>
                    <div class="pet-stat">
                        <span class="pet-stat-label">经验</span>
                        <div class="pet-exp-bar">
                            <div class="pet-exp-fill" id="pet-exp-fill"></div>
                            <span class="pet-exp-text" id="pet-exp-text">0/10</span>
                        </div>
                    </div>
                    <div class="pet-stat">
                        <span class="pet-stat-label">饥饿度</span>
                        <div class="pet-hunger-bar">
                            <div class="pet-hunger-fill" id="pet-hunger-fill"></div>
                        </div>
                    </div>
                </div>

                <div class="pet-display-area">
                    <div class="pet-character" id="pet-character">
                        <div class="pet-emoji" id="pet-emoji">🐱</div>
                        <div class="pet-name" id="pet-name-display">小猫咪</div>
                    </div>
                    <div class="pet-speech-bubble" id="pet-speech-bubble">
                        欢迎来看我呀！一起学习吧~ 📚
                    </div>
                </div>

                <div class="pet-actions">
                    <button class="cyber-btn" onclick="feedPet()">🍖 喂食 (消耗1个食物)</button>
                    <button class="cyber-btn" onclick="playWithPet()">🎾 互动</button>
                    <button class="cyber-btn" onclick="renamePet()">✏️ 改名</button>
                    <button class="cyber-btn" onclick="resetPet()" style="background: var(--neon-red);">🔄 更换宠物</button>
                </div>

                <div class="pet-tips">
                    <h4>💡 小贴士</h4>
                    <ul>
                        <li>完成学习任务（做题、识字）可以获得食物</li>
                        <li>每做对5道题获得1个食物</li>
                        <li>喂食可以增加宠物经验值</li>
                        <li>宠物升级后会变得更大更可爱</li>
                        <li>记得定期喂养，宠物饿了会不开心哦</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 背包 -->
        <section id="backpack" class="panel">
            <div class="panel-header">
                <h2>背包</h2>
                <button class="cyber-btn" onclick="showAddItemModal('backpack')">+ 添加物品</button>
            </div>
            <div id="backpack-items" class="items-grid">
                <!-- 背包物品 -->
            </div>
        </section>

        <!-- 仓库 -->
        <section id="storage" class="panel">
            <div class="panel-header">
                <h2>仓库</h2>
                <button class="cyber-btn" onclick="showAddItemModal('storage')">+ 添加物品</button>
            </div>
            <div id="storage-items" class="items-grid">
                <!-- 仓库物品 -->
            </div>
        </section>

        <!-- 商店 -->
        <section id="shop" class="panel">
            <div class="panel-header">
                <h2>商店</h2>
                <div class="gold-display">
                    <span class="gold-icon">💰</span>
                    <span id="gold-amount">100</span>
                    <button class="cyber-btn-small" onclick="editGold()">编辑</button>
                </div>
            </div>
            <div class="shop-controls">
                <button class="cyber-btn" onclick="showAddShopItemModal()">+ 添加商品</button>
            </div>
            <div id="shop-items" class="items-grid">
                <!-- 商店物品 -->
            </div>
        </section>

        <!-- 思维地图 -->
        <section id="map" class="panel">
            <div class="panel-header">
                <h2>思维地图</h2>
            </div>
            <div class="map-toolbar">
                <button class="map-tool-btn" onclick="addMapNode()">
                    <span class="tool-icon">➕</span>
                    <span class="tool-text">添加</span>
                </button>
                <button class="map-tool-btn" id="connectModeBtn" onclick="toggleConnectMode()">
                    <span class="tool-icon">🔗</span>
                    <span class="tool-text">连线</span>
                </button>
                <button class="map-tool-btn danger" onclick="clearMap()">
                    <span class="tool-icon">🗑️</span>
                    <span class="tool-text">清空</span>
                </button>
            </div>
            <div class="map-container" id="mapContainer">
                <svg id="mapSvg" class="map-svg"></svg>
                <div id="mapNodes" class="map-nodes"></div>
            </div>
            <div class="map-hint" id="mapHint">
                <span>📱 提示：长按节点可拖动，点击标题展开详情</span>
            </div>
        </section>

        <!-- 技能树 -->
        <section id="skills" class="panel">
            <div class="panel-header">
                <h2>技能树</h2>
                <button class="cyber-btn" onclick="showAddSkillModal()">+ 添加技能</button>
            </div>
            <div id="skills-container" class="skills-container">
                <!-- 技能树内容 -->
            </div>
        </section>

        <!-- 考验 -->
        <section id="challenge" class="panel">
            <div class="panel-header">
                <h2>考验</h2>
            </div>
            <div class="challenge-tabs">
                <button class="challenge-tab active" data-challenge="math">算术题</button>
                <button class="challenge-tab" data-challenge="literacy">识字</button>
            </div>

            <!-- 算术题 -->
            <div id="math-challenge" class="challenge-content active">
                <button class="cyber-btn generate-btn" onclick="generateMathQuestions()">生成题目</button>
                <div id="math-questions" class="questions-container"></div>
                <button id="submit-math" class="cyber-btn submit-btn" style="display:none;" onclick="submitMathAnswers()">提交答案</button>
                <div id="math-result" class="result-display"></div>
            </div>

            <!-- 识字 -->
            <div id="literacy-challenge" class="challenge-content">
                <button class="cyber-btn generate-btn" onclick="generateLiteracyQuestion()">生成题目</button>
                <div id="literacy-question" class="literacy-container"></div>
                <div id="literacy-result" class="result-display"></div>
            </div>
        </section>

        <!-- 设置 -->
        <section id="settings" class="panel">
            <div class="panel-header">
                <h2>设置</h2>
            </div>
            <div class="settings-container">
                <div class="settings-section">
                    <h3>🗑️ 数据管理</h3>
                    <p class="settings-desc">清除所有本地缓存数据，重置游戏进度。此操作不可撤销！</p>
                    <button class="cyber-btn danger-btn" onclick="showResetConfirmModal()">🔄 重置所有数据</button>
                </div>
                <div class="settings-section">
                    <h3>📊 数据统计</h3>
                    <div class="data-stats">
                        <div class="data-stat-item">
                            <span class="data-stat-label">属性数量</span>
                            <span class="data-stat-value" id="stats-count">0</span>
                        </div>
                        <div class="data-stat-item">
                            <span class="data-stat-label">技能数量</span>
                            <span class="data-stat-value" id="skills-count">0</span>
                        </div>
                        <div class="data-stat-item">
                            <span class="data-stat-label">背包物品</span>
                            <span class="data-stat-value" id="backpack-count">0</span>
                        </div>
                        <div class="data-stat-item">
                            <span class="data-stat-label">地图节点</span>
                            <span class="data-stat-value" id="map-count">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 添加属性模态框 -->
    <div id="stat-modal" class="modal">
        <div class="modal-content cyber-modal">
            <span class="close-btn" onclick="closeModal('stat-modal')">&times;</span>
            <h3>添加新属性</h3>
            <div class="form-group">
                <label>属性名称</label>
                <input type="text" id="stat-name" placeholder="如：生命值">
            </div>
            <div class="form-group">
                <label>当前值</label>
                <input type="number" id="stat-current" value="100">
            </div>
            <div class="form-group">
                <label>最大值</label>
                <input type="number" id="stat-max" value="100">
            </div>
            <div class="form-group">
                <label>颜色</label>
                <select id="stat-color">
                    <option value="red">红色</option>
                    <option value="blue">蓝色</option>
                    <option value="green">绿色</option>
                    <option value="yellow">黄色</option>
                    <option value="purple">紫色</option>
                    <option value="cyan">青色</option>
                </select>
            </div>
            <button class="cyber-btn" onclick="confirmAddStat()">确认添加</button>
        </div>
    </div>

    <!-- 添加物品模态框 -->
    <div id="item-modal" class="modal">
        <div class="modal-content cyber-modal">
            <span class="close-btn" onclick="closeModal('item-modal')">&times;</span>
            <h3>添加物品</h3>
            <input type="hidden" id="item-target">
            <div class="form-group">
                <label>物品名称</label>
                <input type="text" id="item-name" placeholder="如：治疗药水">
            </div>
            <div class="form-group">
                <label>数量</label>
                <input type="number" id="item-quantity" value="1" min="1">
            </div>
            <div class="form-group">
                <label>效果属性（可选）</label>
                <select id="item-effect-stat">
                    <option value="">无效果</option>
                </select>
            </div>
            <div class="form-group">
                <label>效果数值</label>
                <input type="number" id="item-effect-value" value="0">
            </div>
            <div class="form-group">
                <label>描述</label>
                <textarea id="item-description" placeholder="物品描述..."></textarea>
            </div>
            <button class="cyber-btn" onclick="confirmAddItem()">确认添加</button>
        </div>
    </div>

    <!-- 添加商品模态框 -->
    <div id="shop-modal" class="modal">
        <div class="modal-content cyber-modal">
            <span class="close-btn" onclick="closeModal('shop-modal')">&times;</span>
            <h3>添加商品</h3>
            <div class="form-group">
                <label>商品名称</label>
                <input type="text" id="shop-item-name" placeholder="如：能量饮料">
            </div>
            <div class="form-group">
                <label>价格（金币）</label>
                <input type="number" id="shop-item-price" value="10" min="1">
            </div>
            <div class="form-group">
                <label>效果属性（可选）</label>
                <select id="shop-item-effect-stat">
                    <option value="">无效果</option>
                </select>
            </div>
            <div class="form-group">
                <label>效果数值</label>
                <input type="number" id="shop-item-effect-value" value="0">
            </div>
            <div class="form-group">
                <label>描述</label>
                <textarea id="shop-item-description" placeholder="商品描述..."></textarea>
            </div>
            <button class="cyber-btn" onclick="confirmAddShopItem()">确认添加</button>
        </div>
    </div>

    <!-- 编辑属性模态框 -->
    <div id="edit-stat-modal" class="modal">
        <div class="modal-content cyber-modal">
            <span class="close-btn" onclick="closeModal('edit-stat-modal')">&times;</span>
            <h3>编辑属性</h3>
            <input type="hidden" id="edit-stat-id">
            <div class="form-group">
                <label>当前值</label>
                <input type="number" id="edit-stat-current">
            </div>
            <div class="form-group">
                <label>最大值</label>
                <input type="number" id="edit-stat-max">
            </div>
            <button class="cyber-btn" onclick="confirmEditStat()">确认修改</button>
        </div>
    </div>

    <!-- 添加技能模态框 -->
    <div id="skill-modal" class="modal">
        <div class="modal-content cyber-modal">
            <span class="close-btn" onclick="closeModal('skill-modal')">&times;</span>
            <h3 id="skill-modal-title">添加技能</h3>
            <input type="hidden" id="skill-edit-id">
            <div class="form-group">
                <label>技能名称 *</label>
                <input type="text" id="skill-name" placeholder="如：火球术">
            </div>
            <div class="form-group">
                <label>技能描述</label>
                <textarea id="skill-description" placeholder="技能的描述..."></textarea>
            </div>
            <div class="form-group">
                <label>父技能（可选）</label>
                <select id="skill-parent">
                    <option value="">无（根技能）</option>
                </select>
            </div>
            <div class="form-group">
                <label>技能图标</label>
                <input type="text" id="skill-icon" placeholder="如：⚔️ 🔥 ⭐" value="⭐">
            </div>
            <div class="skill-effects-section">
                <h4>使用效果</h4>
                <div class="skill-effect-row">
                    <label>消耗属性</label>
                    <select id="skill-cost-stat">
                        <option value="">无消耗</option>
                    </select>
                    <input type="number" id="skill-cost-value" placeholder="消耗数值" value="0">
                </div>
                <div class="skill-effect-row">
                    <label>获得属性</label>
                    <select id="skill-gain-stat">
                        <option value="">无获得</option>
                    </select>
                    <input type="number" id="skill-gain-value" placeholder="获得数值" value="0">
                </div>
            </div>
            <button class="cyber-btn" onclick="confirmAddSkill()">确认</button>
        </div>
    </div>

    <!-- 重置确认模态框 -->
    <div id="reset-modal" class="modal">
        <div class="modal-content cyber-modal reset-modal">
            <span class="close-btn" onclick="closeModal('reset-modal')">&times;</span>
            <div class="reset-warning">
                <div class="reset-icon">⚠️</div>
                <h3>确定要重置所有数据吗？</h3>
                <p>此操作将清除所有本地缓存数据，包括：</p>
                <ul class="reset-list">
                    <li>✦ 所有属性数值</li>
                    <li>✦ 宠物数据</li>
                    <li>✦ 背包和仓库物品</li>
                    <li>✦ 商店商品</li>
                    <li>✦ 技能树</li>
                    <li>✦ 思维地图</li>
                    <li>✦ 金币和食物</li>
                </ul>
                <p class="reset-warning-text">⚠️ 此操作不可撤销！</p>
            </div>
            <div class="reset-buttons">
                <button class="cyber-btn cancel-btn" onclick="closeModal('reset-modal')">取消</button>
                <button class="cyber-btn danger-btn" onclick="confirmReset()">确认重置</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
